<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="msapplication-TileColor" content="#0E0E0E">
    <meta name="template-color" content="#0E0E0E">
    <meta name="description" content="index page">
    <meta name="keywords" content="index, page">
    <meta name="author" content="">
    <link rel="shortcut icon" type="image/x-icon" href="assets/imgs/template/favicon.svg">
    <link href="assets/css/style.css?v=1.0.0" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/styles.css') }}">
    <title>Travi</title>
   
    
<script type="module">
      // Import Firebase modules
     // Import Firebase modules
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
import { getDatabase, ref, onValue, get, set } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

      // Firebase configuration
      const firebaseConfig = {
          apiKey: "AIzaSyCIIwPjnFskKiEvEIhSb5KXgevBNyduSDk",
          authDomain: "ty-project-80ab7.firebaseapp.com",
          projectId: "ty-project-80ab7",
          storageBucket: "ty-project-80ab7.firebasestorage.app",
          messagingSenderId: "491495110151",
          appId: "1:491495110151:web:035795af4bc8eebff79ca2",
          measurementId: "G-XFS1VYTHSM",
          databaseURL: "https://ty-project-80ab7-default-rtdb.firebaseio.com/"
      };
  
     // Initialize Firebase
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const auth = getAuth(app);


const modalStyle = document.createElement('style');
      modalStyle.textContent = `
      /* Trip Card Styles */
.trip-card {
    min-width: 300px;
    max-width: 350px;
    background: linear-gradient(145deg, #f1f1f1, #ffffff); /* Light gradient for depth */
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); /* Soft shadow for elevated effect */
    transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease; /* Smooth hover effects */
    overflow-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    flex-shrink: 0;
    background: #ffffff;
    border: 1px solid #f1f1f1;
    color: #333; /* Default text color */
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Clean, modern font */
}

.trip-card:hover {
    transform: translateY(-8px); /* Slight lift on hover */
    box-shadow: 0 16px 30px rgba(0, 0, 0, 0.15); /* Stronger shadow for hover effect */
    background-color: #f9f9f9; /* Soft background color change */
}

.trip-card p {
    margin: 10px 0;
    line-height: 1.6;
    color: #555;
    font-size: 16px; /* Slightly lighter text for readability */
}

.trip-card strong {
    color: #333;
    font-weight: bold;
    font-size: 16px; /* Slightly larger font for emphasis */
}

.trip-card span {
    color: #888; /* Subtle text color for secondary information */
}

/* Trip Card Image */
.trip-card img {
    width: 100%;
    border-radius: 12px;
    margin-bottom: 15px; /* Space between image and content */
    object-fit: cover; /* Ensures the image covers the space without distortion */
    max-height: 180px; /* Limits image height for consistency */
}

/* Badge or Label (e.g. "Popular", "Recommended") */
.trip-card .badge {
    background-color: #00b8e6;
    color: white;
    padding: 5px 15px;
    font-size: 14px;
    border-radius: 20px;
    font-weight: 600;
    position: absolute;
    top: 15px;
    left: 15px;
    z-index: 10;
}

/* Adding a subtle transition to the image */
.trip-card img:hover {
    transform: scale(1.05); /* Slight zoom-in effect on image hover */
    transition: transform 0.3s ease-in-out;
}

/* Button within the trip card */
.trip-card .details-btn {
    background: #00d2ff;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background 0.3s ease, transform 0.2s ease;
}

.trip-card .details-btn:hover {
    background: #00b8e6;
    transform: scale(1.05); /* Slight zoom effect on button hover */
}
///remove above if too much
 /* Modal Background */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    transition: opacity 0.3s ease-in-out;
}

/* Modal Content */
.modal-content {
    background-color: white;
    margin: 10% auto;
    padding: 30px;
    border-radius: 20px;
    width: 90%;
    max-width: 600px;
    position: relative;
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1); /* Subtle, softer shadow */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    font-family: 'Arial', sans-serif;
    font-size: 18px;
    line-height: 1.6;
    color: #333;
}

.modal-content:hover {
    transform: translateY(-8px);
    box-shadow: 0 16px 30px rgba(0, 0, 0, 0.15); /* Slightly elevated effect on hover */
}

/* Close Button */
.close-btn {
    position: absolute;
    right: 20px;
    top: 10px;
    font-size: 30px;
    color: #333;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.3s ease, transform 0.2s ease;
}

.close-btn:hover {
    color: #ff6347;
    transform: rotate(45deg); /* Subtle rotation effect for a playful feel */
}

/* Trip Details */
.trip-details {
    margin: 20px 0;
    padding: 15px;
    border-bottom: 2px solid #f1f1f1;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 16px;
    line-height: 1.6;
    color: #555;
    background-color: #f9f9f9; /* Light background for better contrast */
    border-radius: 8px;
}

.trip-details:last-child {
    border-bottom: none;
}

/* Responsive Design */
@media (max-width: 600px) {
    .modal-content {
        width: 95%;
        padding: 20px; /* Reduce padding for small screens */
    }

    .close-btn {
        font-size: 28px;
    }
}

      `;
      document.head.appendChild(modalStyle);
  
      // Add modal HTML structure
      const modalHTML = `
          <div id="trip-modal" class="modal">
              <div class="modal-content">
                  <span class="close-btn">&times;</span>
                  <div class="daily-activities"></div>
              </div>
          </div>
      `;
      document.body.insertAdjacentHTML('beforeend', modalHTML);
  
      // Set up modal close functionality
      const modal = document.getElementById('trip-modal');
      const closeButton = modal.querySelector('.close-btn');
  
      closeButton.addEventListener('click', () => {
          modal.style.display = 'none';
      });
  
      window.addEventListener('click', (event) => {
          if (event.target === modal) {
              modal.style.display = 'none';
          }
      });
  
     // Function to retrieve and display trips
function retrieveAndDisplayTrips() {
    console.log('Fetching all trips...');

    const tripsRef = ref(database, 'travel-bookings');
    const tripContainer = document.getElementById('trip-container');
    
    if (!tripContainer) {
        console.error('Trip container element not found');
        return;
    }

    onValue(tripsRef, (snapshot) => {
        console.log('Data received:', snapshot.val());
        tripContainer.innerHTML = '';

        if (!snapshot.exists()) {
            tripContainer.innerHTML = '<p>No trips found.</p>';
            return;
        }

        const allData = snapshot.val();
        let allTrips = [];
        let participantCountPromises = [];

        // Collect all trips and set up participant count promises
        Object.keys(allData).forEach(userEmail => {
            if (allData[userEmail].hasOwnProperty('public-trips')) {
                const userTrips = allData[userEmail]['public-trips'];
                const sanitizedEmail = userEmail.replace(/[,; ]+/g, '.').toLowerCase();

                Object.keys(userTrips).forEach(tripId => {
                    // Create a trip object
                    const tripObj = { 
                        id: tripId, 
                        creatorEmail: sanitizedEmail,
                        ...userTrips[tripId]
                    };
                    
                    allTrips.push(tripObj);
                    
                    // Create a promise to get participant count
                    const participantPath = `travel-bookings/${userEmail}/public-trips/${tripId}/participants`;
                    const countPromise = getParticipantCount(participantPath).then(count => {
                        tripObj.participantCount = count; // Add count to trip object
                        return tripObj;
                    });
                    
                    participantCountPromises.push(countPromise);
                });
            }
        });

        // Wait for all participant counts to be retrieved
        Promise.all(participantCountPromises).then(() => {
            // Sort trips by timestamp
            allTrips.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));

            if (allTrips.length === 0) {
                tripContainer.innerHTML = '<p>No trips found.</p>';
                return;
            }

            // Display all trips
            allTrips.forEach(trip => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'trip-card';

                const startDate = trip.startDate ? new Date(trip.startDate).toLocaleDateString() : 'N/A';
                const endDate = trip.endDate ? new Date(trip.endDate).toLocaleDateString() : 'N/A';
                const applyDate = trip.applyByDate ? new Date(trip.applyByDate) : null;
                const applyDateString = applyDate ? applyDate.toLocaleDateString() : 'N/A';
                const isExpired = applyDate && applyDate < new Date();
                const isFull = trip.participantCount >= trip.maxPeople;
                
                // Add participant count to display
                cardDiv.innerHTML = `
                    <p><strong>Trip Name:</strong> <span>${trip.travelerName || 'N/A'}</span></p>
                    <p><strong>Destination:</strong> <span>${trip.destination || 'N/A'}</span></p>
                    <p><strong>Start Date:</strong> <span>${startDate}</span></p>
                    <p><strong>End Date:</strong> <span>${endDate}</span></p>
                    <p><strong>Duration:</strong> <span>${trip.numberOfDays || 'N/A'} days</span></p>
                      <p><strong>Estimated Budget (Per Person):</strong> <span>${trip.budget || 'N/A'} ${trip.currency} </span></p>
                    <p><strong>People Joined:</strong> <span>${trip.participantCount || 0}/${trip.maxPeople || 'N/A'}</span></p>
                    <p><strong>Travel Essentials:</strong> <span>${trip.savedEssentials || 'None selected'}</span></p>
                    <p><strong>Apply By:</strong> <span>${applyDateString}</span></p>
                    <p><strong>Creator Email:</strong> <span>${trip.creatorEmail || 'N/A'}</span></p>

                    <div style="display: flex; gap: 10px; align-items: center;">
                       <button class="view-details-btn" data-trip-id="${trip.id}"
                        style="padding: 10px 15px; color: white; border: none; 
                        border-radius: 5px; background-color: rgb(0, 210, 255);">
                        View Details
                        </button>
                        
                        <button onclick="joinTrip('${trip.id}')" 
                            style="padding: 10px 15px; background-color: ${isExpired || isFull ? '#ccc' : '#00d2ff'}; 
                            color: white; border: none; cursor: ${isExpired || isFull ? 'not-allowed' : 'pointer'}; float:right; 
                            border-radius: 5px;" ${isExpired || isFull ? 'disabled' : ''}>
                            ${isExpired ? 'Expired' : isFull ? 'Full' : 'Join Now'}
                        </button>
                    </div>
                `;

                tripContainer.appendChild(cardDiv);

                const viewDetailsBtn = cardDiv.querySelector('.view-details-btn');
                viewDetailsBtn.addEventListener('click', () => {
                    openModal(trip.id);
                });
            });
        });
    });
}


// Helper function to get participant count
function getParticipantCount(path) {
    return new Promise((resolve) => {
        const participantsRef = ref(database, path);
        get(participantsRef).then((snapshot) => {
            if (snapshot.exists()) {
                const count = Object.keys(snapshot.val()).length;
                resolve(count);
            } else {
                resolve(0);
            }
        }).catch((error) => {
            console.error("Error getting participants:", error);
            resolve(0);
        });
    });
}
      // Function to open modal and display trip details
function openModal(tripId) {
          console.log("openModal function triggered with tripId:", tripId);
  
          const dailyActivitiesContainer = modal.querySelector('.daily-activities');
          
          if (!dailyActivitiesContainer) {
              console.error("Error: Modal structure is incorrect.");
              return;
          }
  
          const tripsRef = ref(database, 'travel-bookings');
          
          get(tripsRef).then((snapshot) => {
              if (!snapshot.exists()) {
                  dailyActivitiesContainer.innerHTML = '<h2>Error</h2><p>No trips found.</p>';
                  return;
              }
  
              const allData = snapshot.val();
              let tripActivities = null;
  
              Object.keys(allData).forEach(userEmail => {
                  if (allData[userEmail]?.['public-trips']?.[tripId]?.dayActivities) {
                      tripActivities = allData[userEmail]['public-trips'][tripId].dayActivities;
                  }
              });
  
              if (tripActivities) {
                  let activitiesHTML = `<h2>Daily Activities</h2>`;
  
                  const sortedDays = Object.keys(tripActivities)
                      .filter(key => key.startsWith('day'))
                      .sort((a, b) => parseInt(a.replace('day', '')) - parseInt(b.replace('day', '')));
  
                  sortedDays.forEach(day => {
                      activitiesHTML += `
                          <div class="trip-details">
                              <p><strong>Day ${day.replace('day', '')}:</strong> ${tripActivities[day]}</p>
                          </div>
                      `;
                  });
  
                  dailyActivitiesContainer.innerHTML = activitiesHTML;
              } else {
                  dailyActivitiesContainer.innerHTML = '<h2>Daily Activities</h2><p>No activities found for this trip.</p>';
              }
  
              modal.style.display = 'block';
          }).catch((error) => {
              console.error("Error getting activities:", error);
              dailyActivitiesContainer.innerHTML = '<h2>Error</h2><p>Failed to load trip activities. Please try again.</p>';
              modal.style.display = 'block';
          });
      }
  
      // Add main styles
      const mainStyle = document.createElement('style');
      mainStyle.textContent = `
          .slider-container {
              position: relative;
              width: 100%;
              max-width: 1200px;
              margin: 0 auto;
              overflow: hidden;
              padding: 20px;
          }
  
          #trip-container {
              display: flex;
              gap: 20px;
              overflow-x: auto;
              padding: 10px;
              scroll-behavior: smooth;
              -webkit-overflow-scrolling: touch;
          }
  
          .trip-card {
              min-width: 300px;
              max-width: 350px;
              background: white;
              border-radius: 10px;
              padding: 20px;
              box-shadow: 0 4px 6px rgba(0,0,0,0.1);
              transition: transform 0.3s ease;
              overflow-wrap: break-word;
              word-break: break-word;
              white-space: normal;
              flex-shrink: 0;
          }
  
          .trip-card:hover {
              transform: translateY(-5px);
              box-shadow: 0 8px 15px rgba(0,0,0,0.2);
          }
  
          .trip-card p {
              margin: 8px 0;
              line-height: 1.4;
          }
  
          .trip-card strong {
              color: #333;
              font-weight: 600;
          }
  
          .trip-card span {
              color: #666;
          }
  
          .nav-btn {
              position: absolute;
              top: 50%;
              transform: translateY(-50%);
              background: #00d2ff;
              color: white;
              border: none;
              padding: 10px 20px;
              cursor: pointer;
              border-radius: 5px;
              z-index: 1;
          }
  
          #prev-btn { left: 10px; }
          #next-btn { right: 10px; }
  
          @media (max-width: 768px) {
              .nav-btn {
                  display: none;
              }
              
              .trip-card {
                  min-width: 260px;
              }
          }
      `;
      document.head.appendChild(mainStyle);
  
      // Initialize everything when DOM is loaded
      if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => {
              console.log('DOM Content Loaded');
              retrieveAndDisplayTrips();
          });
      } else {
          console.log('DOM Already Loaded');
          retrieveAndDisplayTrips();
      }

 window.joinTrip = async function(tripId) {
    const currentUser = auth.currentUser;
    if (!currentUser) {
        alert('Please log in to join trips');
        return;
    }
    
    try {
        // First fetch trip details to validate against
        const tripsRef = ref(database, 'travel-bookings');
        const snapshot = await get(tripsRef);
        const allData = snapshot.val();
        
        // Find trip creator's email and trip details
        let tripCreatorEmail = null;
        let tripDetails = null;
        
        Object.keys(allData).forEach(userEmail => {
            if (allData[userEmail]?.['public-trips']?.[tripId]) {
                tripCreatorEmail = userEmail;
                tripDetails = allData[userEmail]['public-trips'][tripId];
            }
        });
        
        if (!tripCreatorEmail || !tripDetails) {
            throw new Error('Trip not found');
        }
        
        // Sanitize emails for comparison
        function sanitizeEmail(email) {
            let sanitized = email.replace(/,/g, '.');
            sanitized = sanitized.toLowerCase().trim();
            return sanitized;
        }
        
        const normalizedUserEmail = sanitizeEmail(currentUser.email);
        const normalizedCreatorEmail = sanitizeEmail(tripCreatorEmail);
        
        // Log normalized emails for debugging
        console.log('Normalized current user email:', normalizedUserEmail);
        console.log('Normalized trip creator email:', normalizedCreatorEmail);
        console.log('Are emails equal?', normalizedUserEmail === normalizedCreatorEmail);
        
        // Check if the current user is the trip creator
        if (normalizedUserEmail === normalizedCreatorEmail) {
            console.log('Self-join attempt prevented');
            alert('You cannot request to join your own trip');
            return;
        }
        
        // Gets human-readable text describing accepted genders from gender requirement object
        function getAcceptedGendersText(genderReq) {
            // If gender is a string (legacy format or "Any")
            if (typeof genderReq === 'string') {
                return genderReq === 'Any' ? 'all' : genderReq;
            }
            
            // If gender is an object with boolean flags
            const acceptedGenders = [];
            if (genderReq.female === true) acceptedGenders.push('Female');
            if (genderReq.male === true) acceptedGenders.push('Male');
            if (genderReq.other === true) acceptedGenders.push('Non-binary');
            
            if (acceptedGenders.length === 0) return 'all';
            if (acceptedGenders.length === 3) return 'all';
            
            if (acceptedGenders.length === 1) {
                return acceptedGenders[0];
            } else {
                return acceptedGenders.join(' or ');
            }
        }
        
        // Validates if user's gender meets trip requirements
        function isGenderValid(userGender, genderReq) {
            // If requirement is "Any" or not specified, all genders are valid
            if (!genderReq || (typeof genderReq === 'string' && genderReq === 'Any')) {
                return true;
            }
            
            // Handle case where user selected "Prefer not to say"
            if (userGender === 'Prefer not to say') {
                // This is a policy decision - you might want to block or allow based on your app rules
                return false; // Blocking as default - require explicit gender selection for restricted trips
            }
            
            // If genderReq is a string (legacy format)
            if (typeof genderReq === 'string') {
                return userGender === genderReq;
            }
            
            // If genderReq is an object with boolean flags
            switch (userGender) {
                case 'Female':
                    return genderReq.female === true;
                case 'Male':
                    return genderReq.male === true;
                case 'Others': // Match UI option with validation logic
                    return genderReq.other === true;
                default:
                    return false;
            }
        }
        
        // Create modal for stepper form
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        `;
        
        const modalContent = document.createElement('div');
        modalContent.className = 'modal-content';
        modalContent.style.cssText = `
            background-color: #fefefe;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 800px;
            position: relative;
            transition: all 0.3s ease;
        `;
        
        // Step indicator
        const stepIndicator = document.createElement('div');
        stepIndicator.className = 'step-indicator';
        stepIndicator.style.cssText = `
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        `;
        
        const steps = ['Personal Info', 'Trip Type', 'Confirmation'];
        steps.forEach((step, index) => {
            const stepEl = document.createElement('div');
            stepEl.className = 'step';
            stepEl.textContent = `${index + 1}. ${step}`;
            stepEl.style.cssText = `
                padding: 5px 10px;
                border-radius: 15px;
                background-color: ${index === 0 ? '#00d2ff' : '#ccc'}; /* Different color for inactive steps */
                font-weight: ${index === 0 ? 'bold' : 'normal'};
                color: ${index === 0 ? 'white' : 'black'};
            `;
            stepIndicator.appendChild(stepEl);
        });
        
        modalContent.appendChild(stepIndicator);
        
        // Form container
        const formContainer = document.createElement('div');
        formContainer.className = 'form-container';
        modalContent.appendChild(formContainer);
        
        // Button container
        const buttonContainer = document.createElement('div');
        buttonContainer.style.cssText = `
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        `;
        modalContent.appendChild(buttonContainer);
        
        modal.appendChild(modalContent);
        document.body.appendChild(modal);
        
        // Current step tracker
        let currentStep = 1;
        const formData = {};
        
        // Show appropriate step
        function showStep(step) {
            // Update step indicator
            const stepElements = stepIndicator.querySelectorAll('.step');
            stepElements.forEach((el, index) => {
                el.style.fontWeight = index + 1 === step ? 'bold' : 'normal';
                el.style.backgroundColor = index + 1 === step ? '#4CAF50' : '#e0e0e0';
                el.style.color = index + 1 === step ? 'white' : 'black';
            });
            
            formContainer.innerHTML = '';
            buttonContainer.innerHTML = '';
            
            switch(step) {
                case 1:
                    showPersonalInfoStep();
                    break;
                case 2:
                    showTripTypeStep();
                    break;
                case 3:
                    showConfirmationStep();
                    break;
            }
        }
        
        function createFormGroup(labelText, inputElement) {
            const formGroup = document.createElement('div');
            formGroup.style.marginBottom = '15px';
            
            const label = document.createElement('label');
            label.textContent = labelText;
            label.style.display = 'block';
            label.style.marginBottom = '5px';
            label.style.fontWeight = 'bold';
            label.style.color = 'black';
            
            formGroup.appendChild(label);
            formGroup.appendChild(inputElement);
            
            return formGroup;
        }
        
        function showPersonalInfoStep() {
            const form = document.createElement('form');
            form.id = 'personal-info-form';
            
            // Name field
            const nameInput = document.createElement('input');
            nameInput.type = 'text';
            nameInput.id = 'user-name';
            nameInput.name = 'name';
            nameInput.required = true;
            nameInput.placeholder = 'Enter your full name';
            nameInput.value = formData.name || '';
            nameInput.style.cssText = `
                width: 100%;
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-sizing: border-box;
                color:black;
            `;
            form.appendChild(createFormGroup('Full Name', nameInput));
            
            // Age field
            const ageInput = document.createElement('input');
            ageInput.type = 'number';
            ageInput.id = 'user-age';
            ageInput.name = 'age';
            ageInput.min = '18';
            ageInput.max = '80';
            ageInput.required = true;
            ageInput.placeholder = 'Enter your age';
            ageInput.value = formData.age || '';
            ageInput.style.cssText = `
                width: 100%;
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-sizing: border-box;
                color:black;
            `;
            form.appendChild(createFormGroup('Age', ageInput));
            
            // Gender field
            const genderSelect = document.createElement('select');
            genderSelect.id = 'user-gender';
            genderSelect.name = 'gender';
            genderSelect.required = true;
            genderSelect.style.cssText = `
                width: 100%;
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-sizing: border-box;
            `;
            
            const genderOptions = ['Select Gender', 'Male', 'Female', 'Others'];
            genderOptions.forEach(option => {
                const optionEl = document.createElement('option');
                optionEl.value = option === 'Select Gender' ? '' : option;
                optionEl.textContent = option;
                genderSelect.appendChild(optionEl);
            });
            
            if (formData.gender) {
                genderSelect.value = formData.gender;
            }
            
            // Add gender requirement notice if trip has gender specification
            const genderFormGroup = createFormGroup('Gender', genderSelect);
            form.appendChild(genderFormGroup);
            
            // Show gender requirement information, if any
            if (tripDetails.gender && tripDetails.gender !== 'Any') {
                const genderNotice = document.createElement('div');
                genderNotice.textContent = `Note: This trip requires ${getAcceptedGendersText(tripDetails.gender)} participants.`;
                genderNotice.style.color = 'red';
                genderNotice.style.fontSize = '0.8rem';
                genderNotice.style.marginTop = '5px';
                genderFormGroup.appendChild(genderNotice);
            }
            formContainer.appendChild(form);
            
            // Next button
            const nextButton = document.createElement('button');
            nextButton.textContent = 'Next';
            nextButton.style.cssText = `
                padding: 8px 16px;
                background-color: #00d2ff;
                color:white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            `;
            
            nextButton.addEventListener('click', () => {
                // Validate form
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                // Gender validation - only if user has made a selection and there's a requirement
                if (genderSelect.value && tripDetails.gender && tripDetails.gender !== 'Any') {
                    if (!isGenderValid(genderSelect.value, tripDetails.gender)) {
                        alert(`This trip is only for ${getAcceptedGendersText(tripDetails.gender)} participants.`);
                        return;
                    }
                }
                // Save form data
                formData.name = nameInput.value;
                formData.age = ageInput.value;
                formData.gender = genderSelect.value;
                
                // Go to next step
                currentStep++;
                showStep(currentStep);
            });
            
            // Cancel button
            const cancelButton = document.createElement('button');
            cancelButton.textContent = 'Cancel';
            cancelButton.style.cssText = `
                padding: 8px 16px;
                background-color: #f44336;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            `;
            
            cancelButton.addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            buttonContainer.appendChild(cancelButton);
            buttonContainer.appendChild(nextButton);
        }
        
        function showTripTypeStep() {
            const tripTypeForm = document.createElement('div');
            
            // Show trip destination information
            const tripInfo = document.createElement('div');
            tripInfo.innerHTML = `
                <h3>Trip Details</h3>
                <br>
                <p><strong>Destination:</strong> ${tripDetails.destination}</p>
                <p><strong>Start Date:</strong> ${tripDetails.startDate}</p>
                <p><strong>End Date:</strong> ${tripDetails.endDate}</p>
            `;
            tripTypeForm.appendChild(tripInfo);
            
            // Add trip type selection
            const tripTypeDiv = document.createElement('div');
            tripTypeDiv.style.marginTop = '20px';
            tripTypeDiv.style.marginBottom = '20px';
            
            const tripTypeLabel = document.createElement('label');
            tripTypeLabel.textContent = 'Select Trip Type:';
            tripTypeLabel.style.display = 'block';
            tripTypeLabel.style.marginBottom = '10px';
            tripTypeLabel.style.fontWeight = 'bold';
            tripTypeLabel.style.color = 'black';
            
            const tripTypeSelect = document.createElement('select');
            tripTypeSelect.id = 'trip-type-select';
            tripTypeSelect.style.cssText = `
                width: 100%;
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-sizing: border-box;
                margin-bottom: 15px;
                color:black;
            `;
            
            // Add options for domestic and international
            const domesticOption = document.createElement('option');
            domesticOption.value = 'domestic';
            domesticOption.textContent = 'Domestic Trip';
            
            const internationalOption = document.createElement('option');
            internationalOption.value = 'international';
            internationalOption.textContent = 'International Trip';
            
            tripTypeSelect.appendChild(domesticOption);
            tripTypeSelect.appendChild(internationalOption);
            
            // Set default selection based on stored data if available
            if (formData.tripType) {
                tripTypeSelect.value = formData.tripType;
            }
            
            tripTypeDiv.appendChild(tripTypeLabel);
            tripTypeDiv.appendChild(tripTypeSelect);
            tripTypeForm.appendChild(tripTypeDiv);
            
            // Create containers for domestic and international forms
            const domesticFormContainer = document.createElement('div');
            domesticFormContainer.id = 'domestic-form';
            domesticFormContainer.style.display = 'none';
            
            const internationalFormContainer = document.createElement('div');
            internationalFormContainer.id = 'international-form';
            internationalFormContainer.style.display = 'none';
            
            // Alternative approach
            // Complete redesign of the terms container
            const termsContainer = document.createElement('div');
            termsContainer.style.position = 'relative';
            termsContainer.style.display = 'flex';
            termsContainer.style.alignItems = 'center';
            termsContainer.style.width = '100%';
            termsContainer.style.marginTop = '20px';
            termsContainer.style.marginBottom = '20px';
            
            const checkboxContainer = document.createElement('div');
            checkboxContainer.style.display = 'inline-block';
            checkboxContainer.style.verticalAlign = 'middle';
            checkboxContainer.style.marginRight = '10px';
            
            const termsCheckbox = document.createElement('input');
            termsCheckbox.type = 'checkbox';
            termsCheckbox.id = 'terms-checkbox';
            termsCheckbox.required = true;
            termsCheckbox.style.margin = '0';
            if (formData.termsAccepted) {
                termsCheckbox.checked = true;
            }
            
            const termsText = document.createElement('span');
            termsText.innerHTML = 'I agree to the <a href="#" style="color: blue;">domestic travel terms and conditions.</a>';
            
            // Wrap both elements in a single label for better accessibility
            const termsLabel = document.createElement('label');
            termsLabel.htmlFor = 'terms-checkbox';
            termsLabel.style.display = 'flex';
            termsLabel.style.alignItems = 'center';
            termsLabel.style.cursor = 'pointer';
            termsLabel.style.width = 'fit-content';
            termsLabel.style.color = 'black';
            
            checkboxContainer.appendChild(termsCheckbox);
            termsLabel.appendChild(checkboxContainer);
            termsLabel.appendChild(termsText);
            termsContainer.appendChild(termsLabel);
            
            // Remove any existing terms container first
            const existingTerms = document.getElementById('terms-container');
            if (existingTerms) {
                existingTerms.remove();
            }
            
            termsContainer.id = 'terms-container';
            domesticFormContainer.appendChild(termsContainer);
            
            // International trip form elements
            const passportDiv = document.createElement('div');
            passportDiv.innerHTML = '<h4>International Travel Requirements</h4><br>';
            
            // Passport number
            const passportInput = document.createElement('input');
            passportInput.type = 'text';
            passportInput.id = 'passport-number';
            passportInput.name = 'passportNumber';
            passportInput.placeholder = 'Enter passport number';
            passportInput.value = formData.passportNumber || '';
            passportInput.style.cssText = `
                width: 100%;
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-sizing: border-box;
            `;
            passportDiv.appendChild(createFormGroup('Passport Number', passportInput));
            
            // Passport expiry date
            const expiryInput = document.createElement('input');
            expiryInput.type = 'date';
            expiryInput.id = 'passport-expiry';
            expiryInput.name = 'passportExpiry';
            expiryInput.value = formData.passportExpiry || '';
            expiryInput.style.cssText = `
                width: 100%;
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-sizing: border-box;
            `;
            passportDiv.appendChild(createFormGroup('Passport Expiry Date', expiryInput));
            
            internationalFormContainer.appendChild(passportDiv);
            
            // International terms checkbox
            const intlTermsContainer = document.createElement('div');
            intlTermsContainer.style.position = 'relative';
            intlTermsContainer.style.display = 'flex';
            intlTermsContainer.style.alignItems = 'center';
            intlTermsContainer.style.marginTop = '20px';
            intlTermsContainer.style.marginBottom = '20px';
            
            const intlTermsCheckbox = document.createElement('input');
            intlTermsCheckbox.type = 'checkbox';
            intlTermsCheckbox.id = 'intl-terms-checkbox';
            intlTermsCheckbox.style.margin = '0';
            intlTermsCheckbox.style.marginRight = '8px';
            if (formData.intlTermsAccepted) {
                intlTermsCheckbox.checked = true;
            }
            
            const intlTermsLabel = document.createElement('label');
            intlTermsLabel.htmlFor = 'intl-terms-checkbox';
            intlTermsLabel.style.display = 'flex';
            intlTermsLabel.style.alignItems = 'center';
            intlTermsLabel.style.cursor = 'pointer';
            
            const checkboxSpan = document.createElement('span');
            checkboxSpan.appendChild(intlTermsCheckbox);
            
            const textSpan = document.createElement('span');
            textSpan.innerHTML = 'I agree to the <a href="#" style="color: blue;">international travel terms and conditions</a>';
            
            intlTermsLabel.appendChild(checkboxSpan);
            intlTermsLabel.appendChild(textSpan);
            intlTermsContainer.appendChild(intlTermsLabel);
            
            // Remove any existing terms container first
            const existingIntlTerms = document.getElementById('intl-terms-container');
            if (existingIntlTerms) {
                existingIntlTerms.remove();
            }
            
            intlTermsContainer.id = 'intl-terms-container';
            internationalFormContainer.appendChild(intlTermsContainer);
            
            // Add both form containers to main form
            tripTypeForm.appendChild(domesticFormContainer);
            tripTypeForm.appendChild(internationalFormContainer);
            
            // Function to toggle form display based on selection
            function updateFormDisplay() {
                const selectedType = tripTypeSelect.value;
                
                if (selectedType === 'domestic') {
                    domesticFormContainer.style.display = 'block';
                    internationalFormContainer.style.display = 'none';
                    
                    // Update requirements
                    termsCheckbox.required = true;
                    passportInput.required = false;
                    expiryInput.required = false;
                    intlTermsCheckbox.required = false;
                } else {
                    domesticFormContainer.style.display = 'none';
                    internationalFormContainer.style.display = 'block';
                    
                    // Update requirements
                    termsCheckbox.required = false;
                    passportInput.required = true;
                    expiryInput.required = true;
                    intlTermsCheckbox.required = true;
                }
            }
            
            // Set initial display based on stored value or default to domestic
            tripTypeSelect.value = formData.tripType || 'domestic';
            updateFormDisplay();
            
            // Add event listener for changes
            tripTypeSelect.addEventListener('change', updateFormDisplay);
            
            formContainer.appendChild(tripTypeForm);
            
            // Back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back';
            backButton.style.cssText = `
                padding: 8px 16px;
                background-color: #808080;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            `;
            
            backButton.addEventListener('click', () => {
                currentStep--;
                showStep(currentStep);
            });
            
            // Next button
            const nextButton = document.createElement('button');
            nextButton.textContent = 'Next';
            nextButton.style.cssText = `
                padding: 8px 16px;
                background-color: #00d2ff;
                color:white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            `;
            
            nextButton.addEventListener('click', () => {
                // Get selected trip type
                const selectedType = tripTypeSelect.value;
                formData.tripType = selectedType;
                
                // Validate based on trip type
                if (selectedType === 'domestic') {
                    if (!termsCheckbox.checked) {
                        alert('You must accept the domestic travel terms and conditions to proceed.');
                        return;
                    }
                    formData.termsAccepted = true;
                } else {
                    // International trip validation
                    if (!passportInput.value) {
                        alert('Please enter your passport number.');
                        return;
                    }
                    
                    if (!expiryInput.value) {
                        alert('Please enter your passport expiry date.');
                        return;
                    }
                    
                    if (!intlTermsCheckbox.checked) {
                        alert('You must accept the international travel terms and conditions to proceed.');
                        return;
                    }
                    
                    // Check if passport expires before trip end date
                    const expiryDate = new Date(expiryInput.value);
                    const tripEndDate = new Date(tripDetails.endDate);
                    
                    if (expiryDate < tripEndDate) {
                        alert('Your passport expires before the trip end date. You cannot join this trip.');
                        return;
                    }
                    
                    formData.passportNumber = passportInput.value;
                    formData.passportExpiry = expiryInput.value;
                    formData.intlTermsAccepted = true;
                }
                
                // Go to next step
                currentStep++;
                showStep(currentStep);
            });
            
            buttonContainer.appendChild(backButton);
            buttonContainer.appendChild(nextButton);
        }
        
        function showConfirmationStep() {
            const confirmationDiv = document.createElement('div');
            
            // Summary of information
            confirmationDiv.innerHTML = `
                <h3>Please Confirm Your Information</h3>
                <p><strong>Name:</strong> ${formData.name}</p>
                <p><strong>Age:</strong> ${formData.age}</p>
                <p><strong>Gender:</strong> ${formData.gender}</p>
                <p><strong>Trip Type:</strong> ${formData.tripType.charAt(0).toUpperCase() + formData.tripType.slice(1)}</p>
            `;
            
            if (formData.tripType === 'international') {
                confirmationDiv.innerHTML += `
                    <p><strong>Passport Number:</strong> ${formData.passportNumber}</p>
                    <p><strong>Passport Expiry:</strong> ${formData.passportExpiry}</p>
                `;
            }
            
            confirmationDiv.innerHTML += `
                <p><strong>Terms & Conditions:</strong> Accepted</p>
                <p style="margin-top: 20px; font-weight: bold;">Are you sure you want to submit your request to join this trip?</p>
            `;
            
            formContainer.appendChild(confirmationDiv);
            
            // Back button
            const backButton = document.createElement('button');
            backButton.textContent = 'Back';
            backButton.style.cssText = `
                padding: 8px 16px;
                background-color: #808080;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            `;
            
            backButton.addEventListener('click', () => {
                currentStep--;
                showStep(currentStep);
            });
            
            // Submit button
            const submitButton = document.createElement('button');
            submitButton.textContent = 'Submit Request';
            submitButton.style.cssText = `
                padding: 8px 16px;
                background-color: #00d2ff;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            `;
            
            submitButton.addEventListener('click', async () => {
                try {
                    // Prepare request data with collected information
                    const requestData = {
                        requesterId: currentUser.uid,
                        requesterEmail: currentUser.email,
                        requesterName: formData.name,
                        requesterAge: formData.age,
                        requesterGender: formData.gender,
                        tripId: tripId,
                        status: 'pending',
                        timestamp: new Date().toISOString()
                    };
                    
                    // Add trip type specific data
                    if (formData.tripType === 'international') {
                        requestData.passportNumber = formData.passportNumber;
                        requestData.passportExpiry = formData.passportExpiry;
                    }
                    
                    console.log('Submitting request with data:', requestData);
                    
                    const requestRef = ref(
                        database,
                        `travel-bookings/${tripCreatorEmail}/public-trips/${tripId}/requests/${currentUser.uid}`
                    );
                    
                    await set(requestRef, requestData);
                    console.log('Request successfully created');
                    
                    // Close modal and show success message
                    document.body.removeChild(modal);
                    alert('Your request to join has been submitted!');
                } catch (error) {
                    console.error('Error submitting join request:', error);
                    alert('Failed to submit join request. Please try again.');
                }
            });
            
            buttonContainer.appendChild(backButton);
            buttonContainer.appendChild(submitButton);
        }
        
        // Initialize with first step
        showStep(1);
        
    } catch (error) {
        console.error('Error processing join request:', error);
        alert('Failed to process join request. Please try again.');
    }
};

 



 </script>
  
  
  <style>
    .chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
        }
        .chat-popup {
            display: none;
            position: fixed;
            bottom: 10%;
            right: 10%;
            width: 400px;
            height: 500px;
            background: white;
            border: 2px solid #007bff;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            padding: 10px;
        }
        .chat-popup .close-btn {
            background: red;
            color: white;
            border: none;
            padding: 5px 10px;
            position: absolute;
            top: 5px;
            right: 5px;
            cursor: pointer;
            border-radius: 50%;
        }
        .chat-frame {
            width: 100%;
            height: 100%;
            border: none;
        }
    /* Add these styles to your existing CSS */
.stepper-container {
  /* Add these new properties */
  display: none;  /* Hidden by default */
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  background: white;
}

.overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
}

/* Add a close button style */
.close-btn {
  position: absolute;
  right: 10px;
  top: 10px;
  cursor: pointer;
  font-size: 20px;
  color: #666;
}
  </style>
  

</head>
  <body>   
    <div class="overlay"></div>

    
<div class="webiste-content"  class="disabled"></div>
    <div id="preloader-active">
      <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-inner position-relative">
          <div class="text-center">
            <div class="spinning-coin-fall"></div>
          </div>
        </div>
      </div>
    </div>
    <header class="header sticky-bar">
      <div class="top-bar"> 
        <div class="container-fluid"> 
          <div class="text-header"> 
            <div class="text-unlock text-sm-bold">Unlock the Magic of Travel with Travi - Your Gateway to Extraordinary Experiences</div><a class="link-secondary-2" href="#">Get This Now 
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" fill="none">
                <path d="M7.99992 12.6666L12.6666 7.99992L7.99992 3.33325M12.6666 7.99992L3.33325 7.99992" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg></a>
          </div>
        </div>
      </div>
      <div class="container-fluid background-body">
        <div class="main-header">
          <div class="header-left">
            <div class="header-logo"><a class="d-flex" href="{{ url_for('home') }}"><img class="light-mode" alt="Travila" src="assets/imgs/template/logonew.svg"><img class="dark-mode" alt="Travila" src="assets/imgs/template/logo-footernew.svg"></a></div>
            <div class="header-nav">
              <nav class="nav-main-menu">
                <ul class="main-menu">
                  <li class="mega-li has-children"><a class="active" href="index.html"><strong>Home</strong></a>
                    <div class="mega-menu">
                      <div class="mega-menu-inner">
                        <div class="row align-items-center">
                          <div class="col-lg-10">
                            <div class="row align-items-center">
                              <div class="col-lg-4">
                                <p class="text-md-bold mb-10 neutral-1000">Start Your Journey</p>
                                <h5 class="mb-45 neutral-1000">Book, Pack, Go! Your Ultimate Travel Companion</h5><a class="btn btn-brand-secondary">Exploring Now 
                                  <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 15L15 8L8 1M15 8L1 8" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"> </path>
                                  </svg></a>
                              </div>
                              <div class="col-lg-4">
                                <div class="card-home-link background-body"> <a class="card-icon" href="index.html"> <img src="assets/imgs/template/icons/activity.svg" alt="Travila"></a>
                                  <div class="card-info"> <!--<a href="index.html">-->
                                    <h6 class="text-md-bold"> Everything in one space</h6></a>
                                    <p class="text-xs-medium neutral-500">
                                      Whether it's your own personalized trip or a bookmarked plan, you'll find everything organized on a single page for your convenience.</p>
                                  </div>
                                </div>
                                <div class="card-home-link background-body"> <a class="card-icon" href="index.html"> <img src="assets/imgs/template/icons/map.svg" alt="Travila"></a>
                                  <div class="card-info"> <a href="index.html">
                                      <h6 class="text-md-bold"> Our Services</h6></a>
                                    <p class="text-xs-medium neutral-500">Tours, Activities, Destinations</p>
                                  </div>
                                </div>
                                <div class="card-home-link background-body"> <a class="card-icon" href="index-3.html"> <img src="assets/imgs/template/icons/deck-chair.svg" alt="Travila"></a>
                                  <div class="card-info"> <!--<a href="index-3.html">-->
                                      <h6 class="text-md-bold">Adjust your itinerary as needed
                                      </h6></a>
                                    <p class="text-xs-medium neutral-500">Seamlessly manage your itinerary all in one page with Travi - from reconfiguring the order of your plans, introducing new destinations to your itinerary, or even discarding plans as needed.</p>
                                  </div>
                                </div>
                              </div>
                              <div class="col-lg-4">
                                <ul class="list-featured">
                                  <li><h1><a class="tours" href="tour-grid-3.html">Tours</a></li></h1>
                                  <!--<li><h2><a class="activities" href="index-5.html">Activities</a></li></h2>
                                  <li><h2><a class="destinations" href="index-6.html"> Destinations</a></li></h2><br><br>-->
                                  <li><a class="hotels" href="customize.html">Customize Your Own Tour With AI</a></li>
                               <!--     <li><a class="hotels" href="index-7.html">Hotels</a></li>
                                  <li><a class="rental-car" href="index-8.html">Rental Car</a></li>
                                  <li><a class="property" href="index-9.html">Property</a></li>
                            <li><a class="tickets" href="index-10.html">Tickets</a></li>--> 
                                </ul>
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-2"><img src="assets/imgs/template/world.png" alt="Travila"></div>
                        </div>
                      </div>
                    </div>
                  </li>
                  <li  class="mega-li-small"><a href="#featured"><strong>Iternaries</strong></a>         
                  </li>
                  <li  class="mega-li-small"><a href="{{ url_for('tour_grid') }}" onclick="checkLoginStatus(event)">
                    <strong> My Iternaries</strong></a>         
                  </li>
                  <script>
                    function checkLoginStatus(event) {
                      if (localStorage.getItem("loggedIn") === "true") {
                        // Redirect if logged in
                        window.location.href = "tour-gridmain.html";
                      } else {
                        // Prevent default action and alert
                        event.preventDefault();
                        alert("Please log in to view your itineraries.");
                      }
                    }
                  </script>
                 
                  <li id="my-profile-list-item" class="mega-li-small"><a href="../travi-dash/my-profile.html" class="check-login"><strong>Profile</strong></a></li>
                  <li><a href="/travi-dash/dashindex.html" class="check-login"><strong>Dashboard</strong></a></li>
                  <script>
                    document.querySelectorAll('.check-login').forEach(link => {
                      link.addEventListener('click', function (event) {
                        if (localStorage.getItem("loggedIn") !== "true") {
                          event.preventDefault();
                          alert("Please log in to access this page.");
                          // Optionally redirect to login page:
                          // window.location.href = "/login.html";
                        }
                      });
                    });
                  </script>
                  
                  <li class="mega-li-small"><a href="{{ url_for('gallery') }}" class="check-login"><strong>Gallery</strong></a></li>
    
                  <li class="mega-li-small"><a href="{{ url_for('blog_grid') }}" class="check-login"><strong>Blog</strong></a></li>
                  
                  
      

              
                  
              
           
                  <li><a href="{{ url_for('contact') }}"><strong>Contact</strong></a></li>
                 
              
              </ul>  </nav>
            </div>
          </div>
          <div class="header-right">
            
           <a href="../travi-dash/login.html"><button id="login-btn" class="me-4 btn btn-brand-secondary">
              Login
            </button></a> 
            <button class="chat-button" onclick="openChat()">Live Chat</button>

            <div class="chat-popup" id="chatPopup">
                <button class="close-btn" onclick="closeChat()"></button>
                <iframe class="chat-frame" src="https://organizations.minnit.chat/975468968082014/Main?embed" allow="autoplay"></iframe>
            <div class="burger-icon-2 burger-icon-white"><img src="assets/imgs/template/icons/menu.svg" alt="Travila"></div> 
            <div class="burger-icon burger-icon-white"><span class="burger-icon-top"></span><span class="burger-icon-mid"></span><span class="burger-icon-bottom"></span></div>
          </div>
        </div>
      </div>
    </header>
 
   
    <main class="main">
      <section class="section-box box-banner-home2 background-body">
        <div class="container-top"> 
          <div class="container"></div>
        </div>
        <div class="container-banner"> 
          <div class="banner-main">
            <div class="banner-slide">
              <div class="banner-image">
                <div class="container"><span class="btn btn-brand-secondary"><a href="{{ url_for('about') }}">About Us</a></span>
                  <h1 class="mt-20 mb-20">Unleash Your Wanderlust<br class="d-none d-lg-block">Plan Your Next Journey</h1>
                  <h6 class="heading-6-medium">Crafting Exceptional Journeys: Your Global Escape Planner. Unleash Your Wanderlust: Seamless Travel, Extraordinary Adventures</h6>
                  
                  
                </div>
               
              </div>
            </div>
            <div class="banner-slide">
              <div class="banner-image">
                <div class="container"><div class="right-top-search"></div>
                  <h1 class="mt-20 mb-20">Explore, Experience, <br class="d-none d-lg-block">Enjoy.</h1>
                  <h6 class="heading-6-medium">Craft Your Perfect Journey with Tailored Itineraries  From Dream Destinations to Every Detail, We Plan It All for You.</h6>
                  
                </div>
              </div>
            </div>
            <div class="banner-slide">
              <div class="banner-image">
                <div class="container">
                  <h1 class="mt-40 mb-20">Roam the World, Create Memories.<br class="d-none d-lg-block"></h1>
                  <h6 class="heading-6-medium">Embark on Journeys Beyond Imagination, Roam the World, and Craft Memories to Treasure Forever.</h6>
                </div>
              </div>
            </div>
            <!--<div class="banner-slide">
              <div class="banner-image">
                <div class="container"><span class="btn btn-brand-secondary">Discovery the World</span>
                  <h1 class="mt-20 mb-20">Unleash Your Wanderlust<br class="d-none d-lg-block">Plan Your Next Journey</h1>
                  <h6 class="heading-6-medium">Crafting Exceptional Journeys: Your Global Escape Planner. Unleash Your Wanderlust: Seamless Travel, Extraordinary Adventures</h6>
                  
                </div>
              </div>
            </div>-->
          </div>
          <div class="slider-thumnail"> 
            <div class="slider-nav-thumbnails">
              <div class="banner-slide"><img src="assets/imgs/page/homepage2/thumb.png" alt="Travila"></div>
              <div class="banner-slide"><img src="assets/imgs/page/homepage2/thumb2.png" alt="Travila"></div>
              <div class="banner-slide"><img src="assets/imgs/page/homepage2/thumb3.png" alt="Travila"></div>
              <div class="banner-slide"><img src="assets/imgs/page/homepage2/thumb.png" alt="Travila"></div>
            </div>
          </div>
        </div>
       
       <!-- <div class="container"> 
          <div class="box-search-advance background-card"> 
            <div class="box-top-search"> 
              <div class="left-top-search"><a class="category-link btn-click active" href="#">Tours</a><a class="category-link btn-click" href="#">Hotels</a><a class="category-link btn-click" href="#">Tickets</a><a class="category-link btn-click" href="#">Rental</a><a class="category-link btn-click" href="#">Activities</a></div>
             
            </div>
            <div class="box-bottom-search background-card"> 
            <div class="item-search"> 
                <label class="text-sm-bold neutral-500">Location</label>
                <div class="dropdown">
                  <button class="btn btn-secondary dropdown-toggle btn-dropdown-search location-search" type="button" data-bs-toggle="dropdown" aria-expanded="false">New York, USA</button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Paris, France</a></li>
                    <li><a class="dropdown-item" href="#">Tokyo, Japan</a></li>
                    <li><a class="dropdown-item" href="#">New York City, USA</a></li>
                  </ul>
                </div>
              </div>
              <div class="item-search item-search-2"> 
                <label class="text-sm-bold neutral-500">Check In</label>
                <div class="box-calendar-date">
                  <input class="search-input datepicker" type="text" placeholder="" value="02 January 2024">
                </div>
              </div>
              <div class="item-search item-search-3"> 
                <label class="text-sm-bold neutral-500">Check Out</label>
                <div class="box-calendar-date">
                  <input class="search-input datepicker" type="text" placeholder="" value="02 January 2024">
                </div>
              </div>
              <div class="item-search bd-none"> 
                <label class="text-sm-bold neutral-500">Guest</label>
                <div class="dropdown">
                  <button class="btn btn-secondary dropdown-toggle btn-dropdown-search passenger-search" type="button" data-bs-toggle="dropdown" aria-expanded="false">2 adults, 2 children</button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">2 adults, 1 children</a></li>
                    <li><a class="dropdown-item" href="#">2 adults, 2 children</a></li>
                    <li><a class="dropdown-item" href="#">2 adults, 3 children</a></li>
                  </ul>
                </div>
              </div>
              <div class="item-search bd-none d-flex justify-content-end"> 
                <button class="btn btn-black-lg"> 
                  <svg width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 19L14.6569 14.6569M14.6569 14.6569C16.1046 13.2091 17 11.2091 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17C11.2091 17 13.2091 16.1046 14.6569 14.6569Z" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>Search
                </button>
              </div>-->  
          
      </section>
      <br>  <br>  <br>

      <section class="background1">
        
        <div class="container"> 
         <div class="row align-items-end">
         <div class="col-md-10"> 
          <div class="aicontent">
              <h3 class="neutral-1000">Smart Trips, Seamlessly Planned  by AI.</h3>
              <br>
              <p class="text-xl-medium neutral-1000">Using AI to create itineraries means transforming travel planning into an effortless experience. With AI, you get personalized recommendations based on your preferences, interests, budget, and time constraints.   </p>
            </div>
            <div class="col-md-3 position-relative mb-30">
              <!--<div class="box-button-slider box-button-slider-team justify-content-end">
                <div class="swiper-button-prev swiper-button-prev-style-1 swiper-button-prev-animate">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" fill="none">
                    <path d="M7.99992 3.33325L3.33325 7.99992M3.33325 7.99992L7.99992 12.6666M3.33325 7.99992H12.6666" stroke="" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </div>
                <div class="swiper-button-next swiper-button-next-style-1 swiper-button-next-animate">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" fill="none">
                    <path d="M7.99992 12.6666L12.6666 7.99992L7.99992 3.33325M12.6666 7.99992L3.33325 7.99992" stroke="" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </div>
              </div>-->
            </div>
          </div>
        </div>
        <div id="aiplanbtn" class="container-slider box-swiper-padding">
         

          <button id="addButtonitn" class="check-login-btn">Create Itinerary</button>
          <script>
            // Apply login check for links
            document.querySelectorAll('.check-login').forEach(link => {
              link.addEventListener('click', function (event) {
                if (localStorage.getItem("loggedIn") !== "true") {
                  event.preventDefault();
                  alert("Please log in to access this page.");
                }
              });
            });
          
            // Apply login check for buttons
            document.querySelectorAll('.check-login-btn').forEach(button => {
              button.addEventListener('click', function (event) {
                if (localStorage.getItem("loggedIn") !== "true") {
                  event.preventDefault();
                  alert("Please log in to create an itinerary.");
                } else {
                
                    window.location.href = "/tour-gridmain";

                }
              });
            });
          </script>
          
        </div>
      </div></section>
      <br>  <br>  <br>

      
      <section id="featured" class="section-box box-news box-news-blog background-1">
        <div class="container"> 
          <div class="col-md-10"> 
            <h2>Our Featured Tours</h2>
            <br>
          </div>
        </div>
    <div class="slider-container">
        <div class="slider-nav">
      
        </div>
       
    </div>
    <br>
    <div id="trip-container" style="padding-left: 80px; padding-right: 80px;"></div>
</section>
<style>
    .past-trips-container-review {
        max-width: 1400px;

        margin-right: 35px;
        margin-left: 35px;
        min-width: 1000px;
    }
    .past-trips-container-review h2 {
        padding-left: 35px;
    }

    .section-header-review {
        margin-bottom: 25px;
        text-align: left;
    }

   

    .section-description-review {
        color: #6c757d;
        font-size: 16px;
    }

    .slider-container-review {
        position: relative;
        padding: 0 40px;
    }

    .slider-wrapper-review {
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        scroll-behavior: smooth;
        padding: 20px 0;
        display: flex;
        gap: 20px;
    }

    .slider-wrapper-review::-webkit-scrollbar { 
        display: none;
    }

    .trip-card-review {
        min-width: 280px;
        max-width: 620px !important; 
        background: linear-gradient(145deg, #ffffff, #f5f5f5);
        border-radius: 16px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        transition: all 0.3s ease;
        flex: 0 0 auto;
        position: relative;
        padding: 20px;
        border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .trip-card-review:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.1);
    }

    .trip-destination-review {
        font-weight: 700;
        font-size: 22px;
        color: #212529;
        margin-bottom: 10px;
        letter-spacing: -0.5px;
    }

    .trip-destination-review::before {
        content: '';
        margin-right: 8px;
        font-size: 18px;
    }

    .trip-date-review {
        color: #6c757d;
        font-size: 14px;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
    }

    .trip-date-review::before {
        content: '';
        margin-right: 8px;
    }

    .trip-user-review {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        font-size: 14px;
    }

    .user-avatar-review {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background-color: #4dabf7;
        margin-right: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        color: white;
        font-weight: 600;
    }

    .user-name-review {
        font-size: 15px;
        color: #495057;
        font-weight: 500;
    }

    .trip-budget-review {
        display: flex;
        align-items: center;
        color: #495057;
        font-size: 14px;
        margin-bottom: 15px;
        padding: 6px 12px;
        background-color: rgba(0, 123, 255, 0.08);
        border-radius: 6px;
        width: fit-content;
    }

    .trip-budget-review::before {
        content: '';
        margin-right: 8px;
    }

    .trip-stats-review {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    .stat-item-review {
        text-align: center;
    }

    .stat-value-review {
        font-weight: 600;
        font-size: 16px;
        color: #212529;
    }

    .stat-label-review {
        font-size: 12px;
        color: #6c757d;
    }

    .rating-display-review {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }

    .stars-review {
        display: flex;
        margin-right: 10px;
    }

    .star-review {
        color: #e2e5e9;
        font-size: 18px;
    }

    .star-review.filled-review {
        color: #ffc107;
    }

    .rating-value-review {
        font-weight: 600;
        color: #212529;
    }

    .review-count-review {
        font-size: 13px;
        color: #6c757d;
        margin-left: 5px;
    }

    .trip-review-review {
        background-color: rgba(0, 0, 0, 0.02);
        padding: 12px;
        border-radius: 8px;
        font-size: 14px;
        color: #495057;
        margin-bottom: 15px;
        max-height: 80px;
        overflow-y: auto;
        position: relative;
    }

    .trip-review-review::before {
        content: '"';
        font-size: 24px;
        color: rgba(0, 0, 0, 0.1);
        position: absolute;
        left: 5px;
        top: 0;
    }

    .trip-review-review::after {
        content: '"';
        font-size: 24px;
        color: rgba(0, 0, 0, 0.1);
        position: absolute;
        right: 5px;
        bottom: 0;
    }

    .trip-checklist-review {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-bottom: 15px;
    }

    .checklist-item-review {
        background-color: rgba(108, 117, 125, 0.08);
        padding: 4px 10px;
        border-radius: 15px;
        font-size: 12px;
        color: #6c757d;
    }

    .action-buttons-review {
        display: flex;
        gap: 10px;
    }

    .action-btn-review {
        flex: 1;
        padding: 8px 5px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
    
    }

    .view-btn-review {
        background-color: #e9ecef;
        color: #495057;
    }

    .view-btn-review:hover {
        background-color: #dee2e6;
    }

    .review-btn-review {
        background-color: #173e5e;
        color: white;
    }

    .review-btn-review:hover {
        background-color: #0c2234;
    }

    .nav-button-review {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 40px;
        height: 40px;
        background-color: white;
        border-radius: 50%;
        border: none;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        transition: all 0.2s;
    }

    .nav-button-review:hover {
        background-color: #f8f9fa;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .prev-button-review {
        left: 0;
    }

    .next-button-review {
        right: 0;
    }

    .nav-button-review i {
        border: solid #495057;
        border-width: 0 2px 2px 0;
        display: inline-block;
        padding: 3px;
    }

    .prev-button-review i {
        transform: rotate(135deg);
    }

    .next-button-review i {
        transform: rotate(-45deg);
    }

    .empty-state-review {
        padding: 60px 40px;
        text-align: center;
        color: #6c757d;
        background-color: white;
        border-radius: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .empty-state-review h3 {
        margin-bottom: 10px;
        color: #343a40;
    }

    /* Review modal */
    .modal-review {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .modal-content-review {
        background-color: white;
        padding: 30px;
        border-radius: 16px;
        width: 500px;
        max-width: 90%;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .modal-header-review {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .modal-title-review {
        font-size: 20px;
        font-weight: 600;
        color: #212529;
        
    }

    .close-modal-review {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #adb5bd;
        transition: color 0.2s;
    }

    .close-modal-review:hover {
        color: #495057;
    }

    .rating-input-review {
        margin-bottom: 20px;
    }

    .rating-input-title-review {
        font-weight: 500;
        margin-bottom: 10px;
        color: #343a40;
    }

    .rating-input-review .stars-review {
        cursor: pointer;
    }

    .rating-input-review .star-review {
        font-size: 24px;
        margin-right: 5px;
        transition: color 0.2s;
    }

    .rating-input-review .star-review:hover,
    .rating-input-review .star-review:hover ~ .star-review {
        color: #ffc107;
    }

    textarea#review-text-review {
        width: 100%;
        padding: 12px;
        border: 1px solid #ced4da;
        border-radius: 8px;
        resize: vertical;
        min-height: 120px;
        margin-bottom: 20px;
        font-family: inherit;
        font-size: 14px;
    }

    textarea#review-text-review:focus {
        outline: none;
        border-color: #4dabf7;
        box-shadow: 0 0 0 3px rgba(77, 171, 247, 0.25);
    }

    .submit-review-review {
        background-color: #4dabf7;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 500;
        transition: background-color 0.2s;
        width: 100%;
    }

    .submit-review-review:hover {
        background-color: #339af0;
    }

    @media (max-width: 968px) {
        .slider-container-review {
            padding: 0 10px;
        }

        .trip-card-review {
            min-width: 460px;
        }
    }

    .trip-reviews-slider-container {
position: relative;
margin: 10px 0;
}

.trip-reviews-slider {
position: relative;
min-height: 100px; /* Adjust based on your design */
}

.trip-review-review {
transition: opacity 0.3s ease;
}

.slider-controls {
display: flex;
justify-content: center;
align-items: center;
margin-top: 10px;
}

.slider-prev, .slider-next {
background: none;
border: none;
font-size: 18px;
cursor: pointer;
margin: 0 10px;
}

.slider-dots {
display: flex;
gap: 5px;
}

.slider-dot {
width: 8px;
height: 8px;
border-radius: 50%;
background-color: #ccc;
cursor: pointer;
}

.slider-dot.active {
background-color: #333;
}
</style>
   
<br>
<br>
<br>
        
        <div class="past-trips-container">
          
          
          <div class="past-trips-container-review">
            <div class="section-header-review">
                <h2>Discover Past Adventures</h2>
                
            </div>
            
            <div class="slider-container-review">
                <button class="nav-button-review prev-button-review" aria-label="Previous trips">
                    <i></i>
                </button>
                
                <div class="slider-wrapper-review" id="trips-slider-review">
                    <!-- Trip cards will be populated by JavaScript -->
                </div>
                
                <button class="nav-button-review next-button-review" aria-label="Next trips">
                    <i></i>
                </button>
            </div>
        </div>
    
        <!-- Review Modal -->
        <div class="modal-review" id="review-modal-review">
            <div class="modal-content-review">
                <div class="modal-header-review">
                    <h3 class="modal-title-review">Write Your Review</h3>
                    <button class="close-modal-review">&times;</button>
                </div>
                <div class="rating-input-review">
                    <p class="rating-input-title-review">Rate this trip:</p>


                    <div id="rating-stars-review">
                        <span class="star-review" data-value="1"></span>
                        <span class="star-review" data-value="2"></span>
                        <span class="star-review" data-value="3"></span>
                        <span class="star-review" data-value="4"></span>
                        <span class="star-review" data-value="5"></span>
                    </div>

                </div>
                <textarea id="review-text-review" placeholder="Share your thoughts on this destination..."></textarea>
                <button class="submit-review-review">Submit Review</button>
            </div>
        </div>
    

    <script type="module" src="{{ url_for('static', filename='review.js') }}"></script>


<!--<script src="review.js" type="module"></script>  -->



</div>

   <br>
   <br>
   <br>
      
    </main>
    <footer class="footer">
      <div class="container">
        <div class="footer-top">
          <div class="row align-items-center"> 
            <div class="col-lg-5 col-md-6 text-center text-md-start">
              <h5 class="color-white">Subscribe to see secret deals prices drop the moment you sign up!</h5>
            </div>
            <div class="col-lg-7 col-md-6 text-center text-md-end">
              <div class="d-flex align-items-center justify-content-center justify-content-md-end">
                <form class="form-newsletter" action="#"> 
                  <input class="form-control" type="text" placeholder="Enter your email">
                  <input class="btn btn-brand-secondary" type="submit" value="Subscribe">
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-3 col-sm-12 footer-1">  
            <div class="mt-20 mb-20"><a class="d-inline-block mb-20" href="index.html"><img alt="Travila" src="assets/imgs/template/logo-footernew.svg"></a>
              <div class="box-info-contact mt-0">
                <p class="text-md neutral-400 icon-address">4517 Washington Ave. Manchester, Kentucky 39495</p>
                <p class="text-md neutral-400 icon-worktime">Hours: 8:00 - 17:00, Mon - Sat</p>
                <p class="text-md neutral-400 icon-email">support@travila.com</p>
              </div>
              <div class="box-need-help"> 
                <p class="need-help text-md-medium mb-5">Need help? Call us</p><br><a class="heading-6 phone-support" href="tel:1-800-222-8888">1-800-222-8888</a>
              </div>
            </div>
          </div>
          <div class="col-md-2 col-xs-6 footer-2">
            <h6 class="text-linear-3">Support</h6>
            <ul class="menu-footer">
              <li><a href="#">Forum support</a></li>
              <li><a href="#"> Help Center</a></li>
              <li><a href="#">Live chat</a></li>
              <li><a href="#">How it works</a></li>
              <li><a href="#">Security</a></li>
              <li><a href="#">Privacy</a></li>
              <li><a href="#">Charges logs</a></li>
            </ul>
          </div>
          <div class="col-md-2 col-xs-6 footer-3">
            <h6 class="text-linear-3">Company</h6>
            <ul class="menu-footer">
              <li><a href="#">About Us</a></li>
              <li><a href="#">Community Blog</a></li>
              <li><a href="#">Jobs and Careers</a></li>
              <li><a href="#">Contact Us</a></li>
              <li><a href="#">Our Awards</a></li>
              <li><a href="#">Agencies</a></li>
            </ul>
          </div>
          <div class="col-md-2 col-xs-6 footer-4">
            <h6 class="text-linear-3">Services</h6>
            <ul class="menu-footer">
              <li><a href="#">Tour Guide</a></li>
              <li><a href="#">Tour Booking</a></li>
              <li><a href="#">Hotel Booking</a></li>
              <li><a href="#">Ticket Booking</a></li>
              <li><a href="#">Rental Services</a></li>
            </ul>
          </div>
          <div class="col-md-3 col-xs-6 footer-5">
            <h6 class="text-linear-3">Legal</h6>
            <ul class="menu-footer">
              <li><a href="#">Terms of Service</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Cookies Policy</a></li>
              <li><a href="#">Data Processing</a></li>
              <li><a href="#">Data Policy</a></li>
              <li><a href="#">Refund Policy</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom mt-50">
          <div class="row align-items-center">
            <div class="col-md-6 text-md-start text-center mb-20">
              <p class="text-sm color-white"> 2024 Travi Inc. All rights reserved.</p>
            </div>
            <div class="col-md-6 text-md-end text-center mb-20">
              <div class="d-flex align-items-center justify-content-end">
                <p class="text-lg-bold neutral-0 d-inline-block mr-10">Follow us</p>
                <div class="box-socials-footer d-inline-block"><a class="icon-socials icon-instagram" href="#">
                    <svg width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M13.4915 1.6665H6.50817C3.47484 1.6665 1.6665 3.47484 1.6665 6.50817V13.4832C1.6665 16.5248 3.47484 18.3332 6.50817 18.3332H13.4832C16.5165 18.3332 18.3248 16.5248 18.3248 13.4915V6.50817C18.3332 3.47484 16.5248 1.6665 13.4915 1.6665ZM9.99984 13.2332C8.2165 13.2332 6.7665 11.7832 6.7665 9.99984C6.7665 8.2165 8.2165 6.7665 9.99984 6.7665C11.7832 6.7665 13.2332 8.2165 13.2332 9.99984C13.2332 11.7832 11.7832 13.2332 9.99984 13.2332ZM14.9332 5.73317C14.8915 5.83317 14.8332 5.92484 14.7582 6.00817C14.6748 6.08317 14.5832 6.1415 14.4832 6.18317C14.3832 6.22484 14.2748 6.24984 14.1665 6.24984C13.9415 6.24984 13.7332 6.1665 13.5748 6.00817C13.4998 5.92484 13.4415 5.83317 13.3998 5.73317C13.3582 5.63317 13.3332 5.52484 13.3332 5.4165C13.3332 5.30817 13.3582 5.19984 13.3998 5.09984C13.4415 4.9915 13.4998 4.90817 13.5748 4.82484C13.7665 4.63317 14.0582 4.5415 14.3248 4.59984C14.3832 4.60817 14.4332 4.62484 14.4832 4.64984C14.5332 4.6665 14.5832 4.6915 14.6332 4.72484C14.6748 4.74984 14.7165 4.7915 14.7582 4.82484C14.8332 4.90817 14.8915 4.9915 14.9332 5.09984C14.9748 5.19984 14.9998 5.30817 14.9998 5.4165C14.9998 5.52484 14.9748 5.63317 14.9332 5.73317Z" fill=""></path>
                    </svg></a><a class="icon-socials icon-facebook" href="#">
                    <svg width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M18.3334 13.4915C18.3334 16.5248 16.5251 18.3332 13.4917 18.3332H12.5001C12.0417 18.3332 11.6667 17.9582 11.6667 17.4998V12.6915C11.6667 12.4665 11.8501 12.2748 12.0751 12.2748L13.5417 12.2498C13.6584 12.2415 13.7584 12.1582 13.7834 12.0415L14.0751 10.4498C14.1001 10.2998 13.9834 10.1582 13.8251 10.1582L12.0501 10.1832C11.8167 10.1832 11.6334 9.99985 11.6251 9.77485L11.5918 7.73317C11.5918 7.59984 11.7001 7.48318 11.8417 7.48318L13.8417 7.44984C13.9834 7.44984 14.0918 7.34152 14.0918 7.19985L14.0584 5.19983C14.0584 5.05816 13.9501 4.94984 13.8084 4.94984L11.5584 4.98318C10.1751 5.00818 9.07509 6.1415 9.10009 7.52484L9.14175 9.8165C9.15008 10.0498 8.96676 10.2332 8.73342 10.2415L7.73341 10.2582C7.59175 10.2582 7.48342 10.3665 7.48342 10.5082L7.50842 12.0915C7.50842 12.2332 7.61675 12.3415 7.75841 12.3415L8.75842 12.3248C8.99176 12.3248 9.17507 12.5082 9.18341 12.7332L9.2584 17.4832C9.26674 17.9498 8.89174 18.3332 8.42507 18.3332H6.50841C3.47508 18.3332 1.66675 16.5248 1.66675 13.4832V6.50817C1.66675 3.47484 3.47508 1.6665 6.50841 1.6665H13.4917C16.5251 1.6665 18.3334 3.47484 18.3334 6.50817V13.4915V13.4915Z" fill=""></path>
                    </svg></a><a class="icon-socials icon-twitter" href="#">
                    <svg width="18" height="16" viewbox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M17.1924 3.06705L14.8565 5.40299C14.3846 10.8733 9.77132 15.1249 4.25022 15.1249C3.11585 15.1249 2.18069 14.9452 1.47053 14.5905C0.897878 14.3038 0.663503 13.9967 0.604909 13.9092C0.552663 13.8309 0.518798 13.7417 0.505847 13.6485C0.492895 13.5552 0.50119 13.4602 0.530113 13.3706C0.559036 13.2809 0.607839 13.199 0.672875 13.1309C0.737911 13.0628 0.817498 13.0102 0.905691 12.9772C0.926003 12.9694 2.79944 12.2499 3.98928 10.8803C3.32943 10.3378 2.75341 9.70072 2.27991 8.98971C1.31116 7.55143 0.226784 5.05299 0.561159 1.3194C0.571758 1.20076 0.616036 1.08762 0.688779 0.993308C0.761521 0.898992 0.859699 0.827427 0.971752 0.787039C1.0838 0.746651 1.20506 0.739122 1.32125 0.76534C1.43744 0.791557 1.54372 0.850429 1.62757 0.935022C1.65491 0.962365 4.22757 3.52096 7.37288 4.35065V3.87487C7.37168 3.37595 7.47032 2.88185 7.66299 2.42164C7.85566 1.96143 8.13847 1.54443 8.49475 1.19518C8.84077 0.849652 9.25248 0.576929 9.70561 0.393103C10.1587 0.209277 10.6441 0.11807 11.133 0.124865C11.7889 0.131335 12.432 0.307407 12.9997 0.635963C13.5674 0.964519 14.0405 1.43438 14.3729 1.99987H16.7502C16.8739 1.99977 16.9948 2.03637 17.0977 2.10504C17.2006 2.17371 17.2808 2.27136 17.3281 2.38562C17.3755 2.49989 17.3878 2.62563 17.3637 2.74693C17.3395 2.86823 17.2799 2.97964 17.1924 3.06705Z" fill=""></path>
                    </svg></a><a class="icon-socials icon-be" href="#">
                    <svg width="21" height="15" viewbox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M8.82393 10.736L13.9225 7.78881L8.82393 4.84165V10.736ZM20.1803 3.04389C20.308 3.50561 20.3964 4.12451 20.4554 4.91042C20.5242 5.69633 20.5536 6.37418 20.5536 6.96361L20.6126 7.78881C20.6126 9.94024 20.4554 11.5219 20.1803 12.5337C19.9347 13.4179 19.3649 13.9877 18.4808 14.2333C18.0191 14.361 17.1742 14.4494 15.8775 14.5083C14.6004 14.5771 13.4313 14.6066 12.3507 14.6066L10.7887 14.6655C6.67251 14.6655 4.10848 14.5083 3.09662 14.2333C2.21247 13.9877 1.64269 13.4179 1.39709 12.5337C1.26938 12.072 1.18097 11.4531 1.12203 10.6672C1.05326 9.8813 1.02379 9.20345 1.02379 8.61402L0.964844 7.78881C0.964844 5.63739 1.12203 4.05575 1.39709 3.04389C1.64269 2.15974 2.21247 1.58996 3.09662 1.34436C3.55834 1.21665 4.4032 1.12823 5.69995 1.06929C6.97705 1.00052 8.14609 0.971052 9.22671 0.971052L10.7887 0.912109C14.9049 0.912109 17.4689 1.06929 18.4808 1.34436C19.3649 1.58996 19.9347 2.15974 20.1803 3.04389Z" fill=""></path>
                    </svg></a></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
  

 
    <script>
function openChat() {
            document.getElementById('chatPopup').style.display = 'block';
        }

        function closeChat() {
            document.getElementById('chatPopup').style.display = 'none';
        }
document.addEventListener('DOMContentLoaded', function () {
    // Only check login status when clicking on protected elements
    function initializeLoginChecks() {

        const popup = document.getElementById('popupitn');
        const overlay = document.getElementById('overlayitn');
        const closePopup = document.getElementById('closePopup');
        const publicButton = document.getElementById('publicButton');
        const privateButton = document.getElementById('privateButton');
        const links = document.querySelectorAll('.check-login');

        // Function to check login status
        function isLoggedIn() {
            return localStorage.getItem('loggedIn') === 'true' || localStorage.getItem('userEmail');
        }

        // Function to handle protected actions
        function handleProtectedAction(callback) {
            if (!isLoggedIn()) {
                alert('You need to log in first!');
                return false;
            }
            if (callback) callback();
            return true;
        }

        // Add click handlers to all check-login elements
        links.forEach(link => {
            link.addEventListener('click', function(event) {
                if (!handleProtectedAction()) {
                    event.preventDefault();
                }
            });
        });

        // Add button click handler
        if (addButton) {
            addButton.addEventListener('click', (event) => {
                handleProtectedAction(() => {
                  window.location.href = "tour-gridmain.html";
                });
            });
        }

        // Close popup handlers
        if (closePopup) {
            closePopup.addEventListener('click', () => {
                popup.style.display = 'none';
                overlay.style.display = 'none';
            });
        }

        if (overlay) {
            overlay.addEventListener('click', () => {
                popup.style.display = 'none';
                overlay.style.display = 'none';
            });
        }

        // Navigation button handlers
        if (publicButton) {
            publicButton.addEventListener('click', (event) => {
                handleProtectedAction(() => {
                    window.location.href = '../travi-dash/public.html';
                });
            });
        }

        if (privateButton) {
            privateButton.addEventListener('click', (event) => {
                handleProtectedAction(() => {
                    window.location.href = '../travi-dash/private.html';
                });
            });
        }
    }

    // Initialize all login checks
    initializeLoginChecks();
});
    
        </script>

    <!--Vendors Scripts-->
    <script src="assets/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
    <!--Other-->
    <script src="assets/js/plugins/magnific-popup.js"></script>
    <script src="assets/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="assets/js/plugins/swiper-bundle.min.js"></script>
    <script src="assets/js/plugins/slick.js"></script>
    <script src="assets/js/plugins/jquery.carouselTicker.js"></script>
    <script src="assets/js/plugins/masonry.min.js"></script>
    <script src="assets/js/plugins/scrollup.js"></script>
    <script src="assets/js/plugins/wow.js"></script>
    <script src="assets/js/plugins/waypoints.js"></script>
    <script src="assets/js/plugins/counterup.js"></script>
    <script src="assets/js/plugins/bootstrap-datepicker.js"></script>
    <script src="assets/js/plugins/dark.js"></script>
    <!-- Count down-->
    <script src="assets/js/vendor/jquery.countdown.min.js"></script>
    <script src="assets/js/plugins/noUISlider.js"></script>
    <script src="assets/js/plugins/slider.js"></script>
    <!--Custom script for this template-->
    <script src="assets/js/main.js?v=1.0.0"></script>
  </body>
</html>